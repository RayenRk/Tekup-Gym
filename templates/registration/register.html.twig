<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="{{ asset("login-regsister-styles/stylereg.css") }}" rel="stylesheet" type="text/css" />
    <title>Register</title>
</head>

<body>

<div class="form-container">

    <!-- Top left link -->
    <a href="{{ path('app_home_index') }}" class="back-button">
        <img src="{{ asset('img/previous.png') }}" alt="Back" style="width: 40px; height: 40px;">
    </a>

    <form method="post">
        <h1>Register</h1>
        {{ form_errors(registrationForm) }}

        {{ form_start(registrationForm) }}
        <div class="form-group">
            {{ form_label(registrationForm.nom) }}
            {{ form_widget(registrationForm.nom, {'attr': {'class': 'form-control'}}) }}
        </div>

        <div class="form-group">
            {{ form_label(registrationForm.prenom) }}
            {{ form_widget(registrationForm.prenom, {'attr': {'class': 'form-control'}}) }}
        </div>

        <div class="form-group">
            {{ form_widget(registrationForm.date_naissance, {'attr': {'class': 'form-control'}}) }}
        </div>

        <div class="form-group">
            {{ form_label(registrationForm.cin) }}
            {{ form_widget(registrationForm.cin, {'attr': {'class': 'form-control'}}) }}
        </div>

        <div class="form-group">
            {{ form_label(registrationForm.email) }}
            {{ form_widget(registrationForm.email, {'attr': {'class': 'form-control'}}) }}

            {# Check for email uniqueness constraint violation and display a custom message #}
            {% if registrationForm.email.vars.errors|length > 0 %}
                {% for error in registrationForm.email.vars.errors %}
                    {% if error.messageTemplate == 'There is already an account with this email' %}
                        <div class="error-message">{{ error.message }}</div>
                    {% else %}
                        <div class="error-message">An error occurred while processing your request.</div>
                    {% endif %}
                {% endfor %}
            {% endif %}
        </div>


        <div class="form-group">
            {{ form_label(registrationForm.plainPassword) }}
            {{ form_widget(registrationForm.plainPassword, {'attr': {'class': 'form-control'}}) }}
        </div>

        <div class="form-group">
            {{ form_widget(registrationForm.roles, {'attr': {'class': 'custom-select form-control'}}) }}
        </div>

        <button type="submit" class="btn btn-dark" >Register</button>
        <p class="btn btn-dark larger-link"><a href="{{path('app_login')}}" class="custom-a">Login</a></p>

        <div id="successModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeSuccessModal()"><img src="{{ asset('img/accept.png') }}"><br> <p>Inscription r√©ussie!</p></span>
            </div>
        </div>
        {{ form_end(registrationForm) }}

    </form>

    <img src="{{ asset('images/header.png') }}" class="fitness-woman" />
</div>
<img src="{{ asset('images/gym-inside.webp') }}" class="img-container" />



</body>
<script>

</script>
</html>
